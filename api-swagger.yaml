openapi: 3.0.0
info:
  description: "[Protein expression interface](https://github.com/bigbio/proxi-schemas/)"
  version: v1
  title: Proteomics Expression Interface
  contact:
    name: Yasset Perez-Riverol
    email: yperez@ebi.ac.uk
  license:
    name: Apache 2.0
    url: https://github.com/bigbio/proxi-schemas/LICENSE.md
servers:
  - url: http://www.ebi.ac.uk/pride/proxi/v1/
  - url: http://localhost:8080/proxi/v1/
  - url: http://www.proteomexchange.org/proxi/v1/
paths:
  /datasets:
    get:
      tags:
        - datasets
      description: Find datasets by a list of accessions
      operationId: getDatasets
      parameters:
         - name: accession
           in: query
           description: Dataset Accessions
           required: false
           schema:
             type: array
             items:
               type: string
         - name: attributes
           in: query
           description: Keywords to search in the datasets attributes
           schema:
             type: array
             items:
               type: string
         - name: size
           in: query
           description: Number of Datasets to returned
           schema:
             type: integer
             format: int32
         - name: page
           in: query
           description: Page number
           required: false
           schema:
            type: integer
         - name: sort
           in: query
           schema:
             type: string
             enum:
               - asc
               - desc
         - name: sortfield
           in: query
           schema:
             type: array
             items:
               type: string
      responses:
        '200':
          description: Successful Operation
          content:
            application/json:
              schema:
                type: obejct
                $ref: '#/components/schemas/Datasets'
            application/xml:
              schema:
                type: object
                $ref: '#/components/schemas/Datasets'
        '400':
          description: Bad Request. Invalid Accession Requested
        '404':
          description: No dataset has been found with the requested accessions

  /datasets/{accession}:
    get:
      tags:
        - datasets
      description: Get a dataset by their accession.
      operationId: getDatasetByAccession
      parameters:
        - name: accession
          in: path
          description: Accession of the dataset in the resource.
          required: true
          schema:
            type: string
      responses:
        '200':
           description: Successful Operation
           content:
             application/json:
               schema:
                 type: object
                 $ref: "#/components/schemas/Dataset"
             application/xml:
               schema:
                 type: object
                 $ref: "#/components/schemas/Dataset"
        '400':
           description: Bad Request. Invalid keyword Requested
        '404':
           description: No dataset has been found with the requested keyword

  /datasets/{accession}/proteins:
     get:
       tags:
         - datasets
       description: Find the list of Proteins in one dataset
       operationId: getProteinsByDatasetAccession
       parameters:
          - name: accession
            in: path
            description: Dataset Accession
            required: true
            schema:
              type: string
       responses:
        '200':
           description: Successful Operation
           content:
              application/json:
                schema:
                  type: object
                  $ref: "#/components/schemas/Proteins"
              application/xml:
                schema:
                  type: object
                  $ref: "#/components/schemas/Proteins"
        '400':
           description: Bad Request. Invalid keyword Requested
        '404':
           description: No dataset has been found with the requested keyword

components:
  schemas:
     OntologyTerm:
       xml:
         name: OntologyTerm
       required:
         - accession
         - name
       properties:
         accession:
           type: string
         name:
           type: string
         value:
           type: string
         cvLabel:
           type: string
     Contact:
       xml:
         name: Contact
       required:
          - contactType
       properties:
          contactType:
             enum: [Submitter, LabHead]
             type: string
          contactProperties:
             type: array
             items:
               $ref: "#/components/schemas/OntologyTerm"
     Dataset:
       xml:
         name: Dataset
       required:
         - accession
         - title
         - summary
         - organisms
         - instruments
         - modifications
         - contacts
         - dataFiles
         - datasetLink
       properties:
         accession:
           type: string
         title:
           type: string
         summary:
           type: string
         organisms:
           type: array
           items:
            $ref: "#/components/schemas/OntologyTerm"
         instruments:
           type: array
           items:
            $ref: "#/components/schemas/OntologyTerm"
         modifications:
           type: array
           items:
            $ref: "#/components/schemas/OntologyTerm"
         contacts:
           type: array
           items:
            $ref: "#/components/schemas/Contact"
         publications:
           type: "array"
           items:
            $ref: "#/components/schemas/OntologyTerm"
         keywords:
           type: "array"
           items:
            $ref: "#/components/schemas/OntologyTerm"
         datasetLink:
            $ref: "#/components/schemas/OntologyTerm"
         dataFiles:
            type: "array"
            items:
             $ref: "#/components/schemas/OntologyTerm"
     Datasets:
       type: array
       items:
         $ref: "#/components/schemas/Dataset"

     Protein:
       required:
         - proteinAccession
         - confidenceScore
       properties:
         proteinAccession:
           type: string
         confidenceScore:
           type: object
           $ref: "#/components/schemas/OntologyTerm"
     Proteins:
            type: array
            items:
              $ref: "#/components/schemas/Protein"
